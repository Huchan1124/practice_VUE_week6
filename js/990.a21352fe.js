"use strict";(self["webpackChunkweek6"]=self["webpackChunkweek6"]||[]).push([[990],{5990:function(t,a,e){e.r(a),e.d(a,{default:function(){return D}});var i=e(3396),l=e(7139),s=e(9242);const n=(0,i._)("h1",null,"購物車頁面",-1),o={class:"container"},c={class:"mt-4"},d={class:"text-end"},r=["disabled"],u={class:"table align-middle"},h=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th"),(0,i._)("th",null,"品名"),(0,i._)("th",{style:{width:"150px"}},"數量/單位"),(0,i._)("th",{class:"text-end"},"價格")])],-1),p=["onClick"],_={class:"input-group input-group-sm"},m={class:"input-group mb-3"},g=["onUpdate:modelValue","disabled","onChange"],v=["value"],b={class:"input-group-text",id:"basic-addon2"},C={class:"text-end"},w=(0,i._)("td",{colspan:"3",class:"text-end"},"總計",-1),k={class:"text-end"};function y(t,a,e,y,x,f){return(0,i.wg)(),(0,i.iD)(i.HY,null,[n,(0,i._)("div",o,[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("button",{class:"btn btn-outline-danger",type:"button",onClick:a[0]||(a[0]=(...t)=>f.removeAllCart&&f.removeAllCart(...t)),disabled:0==x.cartData?.carts?.length}," 清空購物車 ",8,r)]),(0,i._)("table",u,[h,(0,i._)("tbody",null,[x.cartData?.carts?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(x.cartData?.carts,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id},[(0,i._)("td",null,[(0,i._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:a=>f.removeCartItem(t.id)}," x ",8,p)]),(0,i._)("td",null,(0,l.zw)(t.product.title),1),(0,i._)("td",null,[(0,i._)("div",_,[(0,i._)("div",m,[(0,i.wy)((0,i._)("select",{id:"",class:"form-select","onUpdate:modelValue":a=>t.qty=a,disabled:x.isLoadingItem==t.id,onChange:a=>f.updateCartItem(t)},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(10,(a=>(0,i._)("option",{value:a,key:`${a}${t.id}`},(0,l.zw)(a),9,v))),64))],40,g),[[s.bM,t.qty]]),(0,i._)("span",b,(0,l.zw)(t.product.unit),1)])])]),(0,i._)("td",C,(0,l.zw)(t.qty*t.product.price),1)])))),128)):(0,i.kq)("",!0)]),(0,i._)("tfoot",null,[(0,i._)("tr",null,[w,(0,i._)("td",k,(0,l.zw)(x.cartData?.final_total),1)])])])])])],64)}var x={data(){return{cartData:{},productId:"",isLoadingItem:""}},methods:{getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/alicia/cart").then((t=>{this.cartData=t.data.data})).catch((t=>{console.dir(t)}))},removeCartItem(t){this.isLoadingItem=t,confirm("確定要移除品項?")&&this.$http.delete(`https://vue3-course-api.hexschool.io/v2/api/alicia/cart/${t}`).then((t=>{this.getCart(),this.isLoadingItem=""})).catch((t=>{console.dir(t)}))},updateCartItem(t){const a={data:{product_id:t.id,qty:t.qty}};this.isLoadingItem=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/alicia/cart/${t.id}`,a).then((t=>{this.isLoadingItem="",this.getCart()})).catch((t=>{console.dir(t)}))},removeAllCart(){confirm("確定要清空購物車?")&&this.$http.delete("https://vue3-course-api.hexschool.io/v2/api/alicia/carts").then((t=>{this.getCart()})).catch((t=>{console.dir(t)}))}},mounted(){this.getCart()}},f=e(89);const I=(0,f.Z)(x,[["render",y]]);var D=I}}]);
//# sourceMappingURL=990.a21352fe.js.map